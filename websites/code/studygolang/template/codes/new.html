{{define "title"}}{{if .code.Id}}修改{{else}}分享{{end}}代码 {{end}}
{{define "seo"}}<meta name="keywords" content="代码分享, Go语言博文, Go语言, Golang, Go中文社区,Golang中文社区, Go语言社区, Go语言学习园地">
<meta name="description" content="Go语言中文网，分享Go语言常用功能的实现代码">{{end}}
{{define "content"}}
<div class="row banner">
</div>
<div class="row">
	<div class="col-lg-9 col-md-8 col-sm-7">
		<ol class="breadcrumb">
			<li><a href="/"><i class="glyphicon glyphicon-home"></i> 首页</a></li>
			<li><a href="/codes">代码分享</a></li>
			<li class="active">{{if .code.Id}}修改{{else}}分享{{end}}代码</li>
		</ol>
		<div class="page box_white">
			<form class="form-horizontal validate-form" role="form" action="/codes/{{if .code.Id}}modify.json{{else}}new.json{{end}}" data-redirect="/codes{{if .code.Id}}/{{.code.Id}}{{end}}">
				{{if .code.Id}}
				<input type="hidden" name="id" value="{{.code.Id}}" />
				{{end}}
				<div class="form-group form-group-sm">
					<label class="col-sm-2 control-label" for="title"><abbr>*</abbr>标题</label>
					<div class="col-sm-9">
						<input class="form-control required" type="text" id="title" name="title" placeholder="一句话概述代码的用途" value="{{.code.Title}}">
					</div>
				</div>
				<div class="form-group form-group-sm">
					<label class="col-sm-2 control-label" for="remark">简单介绍</label>
					<div class="col-sm-9">
						<textarea class="form-control need-autogrow" id="desc" name="desc" rows="5">{{.code.Remark}}</textarea>
						<span class="help-block">例如代码出处、适用的平台、所依赖的项目等等（可选）</span>
					</div>
				</div>
				<div class="form-group form-group-sm">
					<label class="col-sm-2 control-label" for="code"><abbr>*</abbr>代码</label>
					<div class="col-sm-9">
						<div class="row clearfix md-toolbar">
							<ul class="col-md-10 list-inline">
								<li class="edit cur"><a href="#"><i class="glyphicon glyphicon-edit"></i> 编辑</a></li>
								<li class="preview"><a href="#" title="预览"><i class="glyphicon glyphicon-eye-open preview"></i> 预览</a></li>
							</ul>
						</div>
						<textarea class="form-control need-autogrow required" id="code" name="code" rows="15">{{.code.Code}}</textarea>
						<div class="content-preview"></div>
					</div>
				</div>
				<div class="form-group form-group-sm">
					<label class="col-sm-5 control-label">&nbsp;</label>
					<div class="col-sm-6">
						<button type="submit" class="btn btn-default btn-sm" id="submit">{{if .code.Id}}提交修改{{else}}分享代码{{end}}</button> (Ctrl+Enter)
					</div>
				</div>
			</form>
		</div>
	</div>
	<div class="col-lg-3 col-md-4 col-sm-5">
		<div class="row box_white sidebar">
			<div class="top">
				<h3 class="title"><i class="glyphicon glyphicon-list-alt"></i>&nbsp;分享代码提示</h3>
			</div>
			<div class="sb-content">
				<span class="help-block">
					<ul>
						<li>第一次分享代码之前，请先参考别人的作品</li>
						<li>请先搜索一下是否已有人发布同样代码</li>
						<li>代码将在下一步输入，而不是“简单介绍”</li>
						<li>标签应尽可能短，不要包含其他标点符号</li>
					</ul>
				</span>
			</div>
		</div>

		<div class="row box_white sidebar">
			<div class="top">
				<ul class="list-inline text-center">
					<li class="first"><a href="/topics" target="_blank" class="cur" title="点击更多">最新主题</a>|</li>
					<li class="second"><a href="/resources" target="_blank" title="点击更多">最新资源</a>|</li>
					<li class="last"><a href="javascript:;">最新评论</a></li>
				</ul>
				<p class="bar"></p>
			</div>
			<div class="sb-content">
				<div class="topic-list first">
					<ul class="list-unstyled">
						<img src="/static/img/loaders/loader7.gif" alt="加载中" />
					</ul>
				</div>
				<div class="resource-list second hidden">
					<ul class="list-unstyled">
					</ul>
				</div>
				<div class="cmt-list last hidden">
					<ul class="list-unstyled">
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>
{{end}}
{{define "js"}}
<script	type="text/javascript" src="/static/js/libs/jquery.autogrowtextarea.min.js"></script>
<script	type="text/javascript" src="/static/js/libs/jquery.validate.min.js"></script>
<script type="text/javascript" src="/static/js/libs/jquery.metadata.js"></script>
<script	type="text/javascript" src="/static/js/libs/jquery.validate.msg.cn.js"></script>
<script type="text/javascript" src="/static/js/libs/marked.min.js"></script>
<script type="text/javascript" src="/static/js/libs/highlight.min.js"></script>
<script type="text/javascript" src="/static/js/codes.js"></script>
<script type="text/javascript">
// 需要加载的侧边栏
SG.SIDE_BARS = [
	"/topics/recent.json",
	"/resources/recent.json",
	"/comments/recent.json",
];

$(function(){
	// 文本框自动伸缩
	$('.need-autogrow').autoGrow();
});
</script>
{{end}}